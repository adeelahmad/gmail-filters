#===============================================================================
# Macros
#===============================================================================
DOCKER_RUN = docker run --rm

#===============================================================================
# Configuration
#===============================================================================
MAKEFLAGS += --no-builtin-rules
MAKEFLAGS += --no-print-directory
MAKEFLAGS += --warn-undefined-variables

#===============================================================================
# Targets
#===============================================================================

.PHONY: build
build: filters.xml

#===============================================================================
# Rules
#===============================================================================

filters.xml: filters.rb
	$(DOCKER_RUN) --volume $(CURDIR):/app:ro --workdir /app $(shell docker build --quiet .) $< > $@

